import{elementScrollByPolyfill as e}from"seamless-scroll-polyfill/dist/esm/Element.scrollBy";import{ref as l,watch as t,onMounted as a,onBeforeUnmount as o,openBlock as s,createBlock as n,resolveDynamicComponent as r,withCtx as u,createCommentVNode as i,renderSlot as d,withDirectives as v,createVNode as f,vShow as c}from"vue";import h from"lodash/debounce";var p=function(e,l,t){return Math.abs(e-l)<=t},b="undefined"==typeof window,g=!b;b||"scrollBehavior"in document.documentElement.style||e();var m={name:"Carousel",props:{hideArrows:{type:Boolean,default:!1},hideArrowsOnBound:{type:Boolean,default:!1},tag:{type:String,default:"ul"},i18n:{type:Object,default:()=>({slideLeft:"Slide left",slideRight:"Slide right"}),validator:e=>["slideLeft","slideRight"].every((l=>l in e))}},setup(e,{emit:s}){const n=l(null),r=l(!0),u=l(!1),i=l([]),d=l(0),v=l(0),f=l(0),c=l(0),b=l(0),m=l(null),w=l(null);t(f,((e,l)=>{e!==l&&s("page",{current:e,previous:l})}));const S=()=>{const e=p(c.value,0,5),l=p(d.value-v.value,c.value,5);e?(s("bound-left",!0),r.value=!0):r.value=!1,l?(s("bound-right",!0),u.value=!0):u.value=!1},_=()=>{const e=i.value.findIndex((e=>p(e.offsetLeft,c.value,5)));-1!==e&&-2!==e&&(f.value=e||0)},L=()=>{c.value=n.value.scrollLeft||0},y=()=>{n.value&&(d.value=n.value.scrollWidth,v.value=n.value.offsetWidth,(()=>{const e=[...n.value.children];i.value=e.map((e=>({offsetLeft:e.offsetLeft,width:e.offsetWidth})))})(),L(),_(),S(),(()=>{const e=d.value-v.value;b.value=i.value.findIndex((({offsetLeft:l})=>l>e))-1})())},B=()=>{n.value&&(L(),_(),S())};return a((()=>{y(),g&&(w.value=h(B,100),m.value=h(y,410),n.value.addEventListener("scroll",w.value),window.addEventListener("resize",m.value))})),o((()=>{g&&(n.value.removeEventListener("scroll",w.value),window.removeEventListener("resize",m.value))})),{boundLeft:r,boundRight:u,changeSlide:e=>{const l=(e=>{const l=e>0?f.value:f.value+e,t=i.value[l].width||0;if(t)return t*e})(e);l&&n.value.scrollBy({left:l,behavior:"smooth"})},vsWrapper:n}}};const w={class:"vs-carousel"};m.render=function(e,l,t,a,o,h){return s(),n("div",w,[(s(),n(r(e.tag),{ref:"vsWrapper",class:"vs-carousel__wrapper"},{default:u((()=>[i(" @slot Slot for Slides "),d(e.$slots,"default")])),_:3},512)),i(" @slot Slot for Arrows "),e.hideArrows?i("v-if",!0):d(e.$slots,"arrows",{key:0,changeSlide:a.changeSlide,boundLeft:a.boundLeft,boundRight:a.boundRight},(()=>[e.hideArrowsOnBound&&a.boundLeft?i("v-if",!0):(s(),n("button",{key:0,type:"button","aria-label":e.i18n.slideLeft,disabled:a.boundLeft,class:"\n          vs-carousel__arrows\n          vs-carousel__arrows--left\n        ",onClick:l[1]||(l[1]=e=>a.changeSlide(-1))}," ← ",8,["aria-label","disabled"])),v(f("button",{type:"button","aria-label":e.i18n.slideRight,disabled:a.boundRight,class:"\n          vs-carousel__arrows\n          vs-carousel__arrows--right\n        ",onClick:l[2]||(l[2]=e=>a.changeSlide(1))}," → ",8,["aria-label","disabled"]),[[c,!e.hideArrowsOnBound||!a.boundRight]])]))])},m.__file="src/components/Carousel/Carousel.vue";var S={name:"Slide",props:{tag:{type:String,default:"li"}}};S.render=function(e,l,t,a,o,i){return s(),n(r(t.tag),{ref:"vsSlide",class:"vs-carousel__slide",tabindex:"0"},{default:u((()=>[d(e.$slots,"default")])),_:3},512)},S.__file="src/components/Slide/Slide.vue";var _={install:function(e){e.component("Carousel",m),e.component("Slide",S)}};export default _;export{m as Carousel,S as Slide};
